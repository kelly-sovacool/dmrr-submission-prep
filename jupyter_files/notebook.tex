
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{dmrr\_prep}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \section{Preparing metadata for submission to the
DMRR}\label{preparing-metadata-for-submission-to-the-dmrr}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}1}]:} \PY{n}{study\PYZus{}names} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Healthy Controls}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
        \PY{n}{study\PYZus{}id} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EXR\PYZhy{}MTEWA1HealthyControls}\PY{l+s+s1}{\PYZsq{}}
        \PY{n}{directory} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{healthyCtrl/}\PY{l+s+s1}{\PYZsq{}}
        \PY{n}{is\PYZus{}time\PYZus{}series} \PY{o}{=} \PY{k+kc}{False}
        \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}}
        \PY{l+s+sd}{study\PYZus{}names = [\PYZsq{}Feeding Study\PYZhy{}30 min\PYZsq{}, \PYZsq{}Feeding Study\PYZhy{}1 hr\PYZsq{}]}
        \PY{l+s+sd}{study\PYZus{}id = \PYZsq{}EXR\PYZhy{}MTEWA1HealthyControls\PYZsq{}}
        \PY{l+s+sd}{directory = \PYZsq{}feedingStudy/\PYZsq{}}
        \PY{l+s+sd}{is\PYZus{}time\PYZus{}series = True}
        \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}1}]:} "\textbackslash{}nstudy\_names = ['Feeding Study-30 min', 'Feeding Study-1 hr']\textbackslash{}nstudy\_id = 'EXR-MTEWA1HealthyControls'\textbackslash{}ndirectory = 'feedingStudy/'\textbackslash{}nis\_time\_series = True\textbackslash{}n"
\end{Verbatim}
            
    \subsection{Load the samples
spreadsheet}\label{load-the-samples-spreadsheet}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}2}]:} \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
        \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
        \PY{n}{samples\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sample\PYZus{}sheet.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{k}{for} \PY{n}{column} \PY{o+ow}{in} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Gender}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Race}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Source}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{:}  \PY{c+c1}{\PYZsh{} strip whitespace for consistency}
            \PY{n}{samples\PYZus{}df}\PY{p}{[}\PY{n}{column}\PY{p}{]} \PY{o}{=} \PY{n}{samples\PYZus{}df}\PY{p}{[}\PY{n}{column}\PY{p}{]}\PY{o}{.}\PY{n}{str}\PY{o}{.}\PY{n}{strip}\PY{p}{(}\PY{p}{)}
            \PY{k}{if} \PY{n}{column} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Gender}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}  \PY{c+c1}{\PYZsh{} capitalize first letter}
                \PY{n}{samples\PYZus{}df}\PY{p}{[}\PY{n}{column}\PY{p}{]} \PY{o}{=} \PY{n}{samples\PYZus{}df}\PY{p}{[}\PY{n}{column}\PY{p}{]}\PY{o}{.}\PY{n}{str}\PY{o}{.}\PY{n}{capitalize}\PY{p}{(}\PY{p}{)}
        \PY{c+c1}{\PYZsh{} only use healthy control study and samples that passed quality control}
        \PY{n}{samples\PYZus{}df} \PY{o}{=} \PY{n}{samples\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{(}\PY{n}{samples\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Study}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{isin}\PY{p}{(}\PY{n}{study\PYZus{}names}\PY{p}{)}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{samples\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MISEQ.QC.PASS}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PASS}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{]}
        \PY{c+c1}{\PYZsh{} keep only the necessary columns}
        \PY{n}{samples\PYZus{}df} \PY{o}{=} \PY{n}{samples\PYZus{}df}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Participant.ID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Sample.ID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MT.Unique.ID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Age}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Gender}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Race}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Source}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Study}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
        \PY{n}{samples\PYZus{}df} \PY{o}{=} \PY{n}{samples\PYZus{}df}\PY{o}{.}\PY{n}{set\PYZus{}index}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MT.Unique.ID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Participant.ID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{k}{if} \PY{n}{is\PYZus{}time\PYZus{}series}\PY{p}{:}
            \PY{n}{samples\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{timepoint}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{p}{[}\PY{n}{sample\PYZus{}id}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{k}{for} \PY{n}{sample\PYZus{}id} \PY{o+ow}{in} \PY{n}{samples\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Sample.ID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{,} \PY{n}{index}\PY{o}{=}\PY{n}{samples\PYZus{}df}\PY{o}{.}\PY{n}{index}\PY{p}{)}
            \PY{n}{samples\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{timestep}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{p}{[}\PY{n}{study}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{k}{for} \PY{n}{study} \PY{o+ow}{in} \PY{n}{samples\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Study}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{,} \PY{n}{index}\PY{o}{=}\PY{n}{samples\PYZus{}df}\PY{o}{.}\PY{n}{index}\PY{p}{)}
        \PY{n}{samples\PYZus{}df}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}2}]:}              Participant.ID Sample.ID Age  Gender   Race  Source  \textbackslash{}
        MT.Unique.ID                                                       
        1                     70014     70014  23    Male  Asian  Plasma   
        107                   70014     70014  23    Male  Asian   Serum   
        2                     70016     70016  39    Male  White  Plasma   
        108                   70016     70016  39    Male  White   Serum   
        3                     70028     70028  33  Female  White  Plasma   
        
                                 Study  
        MT.Unique.ID                    
        1             Healthy Controls  
        107           Healthy Controls  
        2             Healthy Controls  
        108           Healthy Controls  
        3             Healthy Controls  
\end{Verbatim}
            
    \subsection{Load the participant info}\label{load-the-participant-info}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}3}]:} \PY{c+c1}{\PYZsh{} remove duplicate participants \PYZhy{}\PYZhy{} all have plasma but some additionally have serum}
        \PY{n}{participants} \PY{o}{=} \PY{n}{samples\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{(}\PY{n}{samples\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Source}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Plasma}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{]}
        \PY{k}{if} \PY{n}{is\PYZus{}time\PYZus{}series}\PY{p}{:}
            \PY{n}{participants} \PY{o}{=} \PY{n}{participants}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{(}\PY{n}{participants}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{timepoint}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{T0}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{]}
        \PY{n}{participants} \PY{o}{=} \PY{n}{participants}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Participant.ID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Age}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Race}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Gender}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Participant.ID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{participants}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}3}]:}                Age                       Race  Gender
        Participant.ID                                       
        70014           23                      Asian    Male
        70016           39                      White    Male
        70028           33                      White  Female
        70029           27  Black or African American  Female
        70038           22                      White  Female
\end{Verbatim}
            
    \subsection{Use correct ontology
terms}\label{use-correct-ontology-terms}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}4}]:} \PY{k+kn}{import} \PY{n+nn}{pprint}
        \PY{n}{race\PYZus{}ontology} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Asian}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Asian}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{asian}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Asian}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Black or African American}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{African American}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mixed/asian \PYZam{} white}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Multiracial}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mixed/Asian \PYZam{}Black}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Multiracial}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mixed/black, white, asian}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Multiracial}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Native Hawiian or other Pacific Islander}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Native Hawaiian or Other Pacific Islander}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pacific Islander}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Native Hawaiian or Other Pacific Islander}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{White}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{White}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{white}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{White}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsh{}MISSING\PYZsh{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsh{}MISSING\PYZsh{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}
        \PY{k}{for} \PY{n}{part\PYZus{}id} \PY{o+ow}{in} \PY{n}{participants}\PY{o}{.}\PY{n}{index}\PY{p}{:}
            \PY{n}{race} \PY{o}{=} \PY{n}{participants}\PY{o}{.}\PY{n}{at}\PY{p}{[}\PY{n}{part\PYZus{}id}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Race}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
            \PY{n}{participants}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{part\PYZus{}id}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Race}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{race\PYZus{}ontology}\PY{p}{[}\PY{n}{race}\PY{p}{]} \PY{k}{if} \PY{n}{race} \PY{o+ow}{in} \PY{n}{race\PYZus{}ontology} \PY{k}{else} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Multiracial}\PY{l+s+s1}{\PYZsq{}}
            
        \PY{n}{pprint}\PY{o}{.}\PY{n}{pprint}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Age}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n+nb}{set}\PY{p}{(}\PY{n}{participants}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Age}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Race}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n+nb}{set}\PY{p}{(}\PY{n}{participants}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Race}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Gender}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n+nb}{set}\PY{p}{(}\PY{n}{participants}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Gender}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{\PYZcb{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
\{'Age': \{'20',
         '21',
         '22',
         '23',
         '24',
         '25',
         '26',
         '27',
         '28',
         '29',
         '30',
         '31',
         '32',
         '33',
         '34',
         '35',
         '36',
         '37',
         '38',
         '39',
         '40',
         '41'\},
 'Gender': \{'Female', 'Male'\},
 'Race': \{'African American',
          'Asian',
          'Multiracial',
          'Native Hawaiian or Other Pacific Islander',
          'White'\}\}

    \end{Verbatim}

    \subsection{Load the donors template}\label{load-the-donors-template}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}5}]:} \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
        \PY{n}{donors} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{templates/Donors.template.tsv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sep}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}t}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{donors} \PY{o}{=} \PY{n}{donors}\PY{o}{.}\PY{n}{set\PYZus{}index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsh{}property}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{donors}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{} Ethnic Group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Current Health Status}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Medical History}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Smoking History}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Medications}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Treatment History}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                     \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Family History}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Treatment History}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Family History}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Developmental Stage}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{} Has Expired?}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Estimated Date}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                     \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Post\PYZhy{}mortem Interval}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{} Notes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{* Family Members}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{} Family Member}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} Relationship}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} DocURL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{* Aliases}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}  Accession}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                     \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} dbName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} URL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{} Health Status}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} Notes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
        \PY{n}{donors}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}5}]:}                    value                                             domain  \textbackslash{}
        \#property                                                                     
        Donor                NaN                      autoID(EXR, uniqAlphaNum, DO)   
        - Status             NaN  enum(Add, Modify, Hold, Cancel, Suppress, Rele{\ldots}   
        - Sex                NaN  bioportalTerms((SNOMEDCT,http://purl.bioontolo{\ldots}   
        - Racial Category    NaN  bioportalTerm(http://data.bioontology.org/sear{\ldots}   
        - Donor Type         NaN       enum(Experimental, Control, Healthy Subject)   
        
                          default required  \textbackslash{}
        \#property                            
        Donor                 NaN      NaN   
        - Status              Add     True   
        - Sex                 NaN     True   
        - Racial Category     NaN      NaN   
        - Donor Type          NaN     True   
        
                                                                 description  
        \#property                                                             
        Donor              Document Describing Information About the Dono{\ldots}  
        - Status                                      Status of the document  
        - Sex              Gender of sample donor (Example: Male, Female,{\ldots}  
        - Racial Category                   The racial category of the donor  
        - Donor Type       Sample type (experimental sample or control sa{\ldots}  
\end{Verbatim}
            
    \subsection{Fill in the donors
dataframe}\label{fill-in-the-donors-dataframe}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}6}]:} \PY{n}{i} \PY{o}{=} \PY{l+m+mi}{1}
        \PY{k}{for} \PY{n}{part\PYZus{}id} \PY{o+ow}{in} \PY{n}{participants}\PY{o}{.}\PY{n}{index}\PY{p}{:}
            \PY{n+nb}{print}\PY{p}{(}\PY{n}{part\PYZus{}id}\PY{p}{)}
            \PY{n}{participant\PYZus{}column} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{value}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n}{part\PYZus{}id}
            \PY{n}{donor\PYZus{}id} \PY{o}{=} \PY{n}{study\PYZus{}id} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{i}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}DO}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{participants}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{part\PYZus{}id}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{donor.id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{donor\PYZus{}id}
            \PY{n}{donors}\PY{o}{.}\PY{n}{insert}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{participant\PYZus{}column}\PY{p}{,} \PY{n}{donors}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
            \PY{n}{donors}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Donor}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{participant\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{n}{donor\PYZus{}id}  \PY{c+c1}{\PYZsh{} for matching biosamples to donor ids}
            \PY{n}{donors}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{} Status}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{participant\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Add}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{donors}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{} Sex}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{participant\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{n}{participants}\PY{o}{.}\PY{n}{at}\PY{p}{[}\PY{n}{part\PYZus{}id}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Gender}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
            \PY{n}{donors}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{} Racial Category}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{participant\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{n}{participants}\PY{o}{.}\PY{n}{at}\PY{p}{[}\PY{n}{part\PYZus{}id}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Race}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
            \PY{n}{donors}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{} Donor Type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{participant\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Healthy Subject}\PY{l+s+s1}{\PYZsq{}} \PY{k}{if} \PY{o+ow}{not} \PY{n}{is\PYZus{}time\PYZus{}series} \PY{k}{else} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Experimental}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{donors}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{} Age}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{participant\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{n+nb}{str}\PY{p}{(}\PY{n}{participants}\PY{o}{.}\PY{n}{at}\PY{p}{[}\PY{n}{part\PYZus{}id}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Age}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ years}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{donors}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{* Custom Metadata}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{participant\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
            \PY{n}{donors}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{} Property Name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{participant\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Participant.ID}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{donors}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} Value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{participant\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{n}{part\PYZus{}id}
            \PY{n}{i} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
        \PY{n}{donors} \PY{o}{=} \PY{n}{donors}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
        \PY{n}{donors}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{,}\PY{p}{:}\PY{l+m+mi}{3}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
70014
70016
70028
70029
70038
70057
70067
70082
70092
70103
70105
70114
70125
70182
70283
70287
70348
70362
70406
70416
70435
70467
70484
70498
70510
70539
70548
70549
70557
70581
70583
70695
70716
70831
70956
70977
71004
71039
71080
71121
71134
71138
71154
71229
71244
71263
71305
71311
71316
71337
71346
71358
71367
71387
71398
71431
71438
71443
71467
71471
71473
71495
71521
71582
71591
71690
71796
71816
71818
71843
71856
71875
71906
71911
71916
71919
71927
71940
71973
71983
72049
72062
72078
72108
72111
72114
72119
72133
72138
72148
72165
72221*
72253*
72254*
72255*
72316
72339*
72349*
72376
72397

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}6}]:}                                       value70014  \textbackslash{}
        \#property                                          
        Donor              EXR-MTEWA1HealthyControls1-DO   
        - Status                                     Add   
        - Sex                                       Male   
        - Racial Category                          Asian   
        - Donor Type                     Healthy Subject   
        
                                              value70016  \textbackslash{}
        \#property                                          
        Donor              EXR-MTEWA1HealthyControls2-DO   
        - Status                                     Add   
        - Sex                                       Male   
        - Racial Category                          White   
        - Donor Type                     Healthy Subject   
        
                                              value70028  
        \#property                                         
        Donor              EXR-MTEWA1HealthyControls3-DO  
        - Status                                     Add  
        - Sex                                     Female  
        - Racial Category                          White  
        - Donor Type                     Healthy Subject  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}7}]:} \PY{n}{participants}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{,} \PY{p}{:}\PY{l+m+mi}{5}\PY{p}{]}  \PY{c+c1}{\PYZsh{} the participants dataframe now has the donor ids}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}7}]:}                Age              Race  Gender                       donor.id
        Participant.ID                                                             
        70014           23             Asian    Male  EXR-MTEWA1HealthyControls1-DO
        70016           39             White    Male  EXR-MTEWA1HealthyControls2-DO
        70028           33             White  Female  EXR-MTEWA1HealthyControls3-DO
        70029           27  African American  Female  EXR-MTEWA1HealthyControls4-DO
        70038           22             White  Female  EXR-MTEWA1HealthyControls5-DO
\end{Verbatim}
            
    \subsection{Load the biosamples
template}\label{load-the-biosamples-template}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}8}]:} \PY{n}{biosamples} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{templates/Biosamples.template.tsv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sep}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}t}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{biosamples} \PY{o}{=} \PY{n}{biosamples}\PY{o}{.}\PY{n}{set\PYZus{}index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsh{}property}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{biosamples} \PY{o}{=} \PY{n}{biosamples}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Age at Sampling}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Notes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{} Description}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Symptoms}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Pathology}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Disease Duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Collection Details}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Sample Collection Method}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Geographic Location}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Collection Date}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Time of Collection}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Collection Tube Type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Other Collection Tube Type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Holding Time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Holding Temperature}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Preservatives Used}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Freezing Method}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Number of Times Freeze Thawed}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Contamination Removal Method}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Notes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Cell Culture Supernatant}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Source}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Cell Line}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Start Date}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Harvest Date}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Tissue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Date Obtained}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Tissue Type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Notes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Starting Amount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Replicate Information}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Biological Replicate Number}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Technical Replicate Number}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Provider}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Company Name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Lab Name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Person Name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{* Pooled Biosamples}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{} Pooled Biosample}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} DocURL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{* Aliases}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}  Accession}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} dbName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} URL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
               \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} Date Submitted to External Database}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} Notes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
        
        \PY{n}{biosamples} \PY{o}{=} \PY{n}{biosamples}\PY{o}{.}\PY{n}{T}
        \PY{n}{biosamples}\PY{o}{.}\PY{n}{insert}\PY{p}{(}\PY{l+m+mi}{18}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} DocURL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{nan}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{URL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{nan}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{nan}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Relative ID (accession) of doc, provide Document URL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
        \PY{k}{if} \PY{n}{is\PYZus{}time\PYZus{}series}\PY{p}{:}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{insert}\PY{p}{(}\PY{l+m+mi}{23}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{} Property Name2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{biosamples}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{} Property Name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{insert}\PY{p}{(}\PY{l+m+mi}{24}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} Value2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{biosamples}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} Value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{insert}\PY{p}{(}\PY{l+m+mi}{25}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{} Property Name3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{biosamples}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{} Property Name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{insert}\PY{p}{(}\PY{l+m+mi}{26}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} Value3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{biosamples}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} Value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
        \PY{n}{biosamples} \PY{o}{=} \PY{n}{biosamples}\PY{o}{.}\PY{n}{T}
        \PY{n}{biosamples}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{,} \PY{p}{:}\PY{l+m+mi}{5}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}8}]:}            value                                             domain default  \textbackslash{}
        \#property                                                                     
        Biosample    NaN                      autoID(EXR, uniqAlphaNum, BS)     NaN   
        - Status     NaN  enum(Add, Modify, Hold, Cancel, Suppress, Rele{\ldots}     Add   
        - Name       NaN                                             string     NaN   
        - Donor ID   NaN                     regexp(EXR-[a-zA-Z0-9]\{6,\}-DO)     NaN   
        -- DocURL    NaN                                                url     NaN   
        
                   required                                        description  
        \#property                                                               
        Biosample       NaN  Document Describing Information About the Bios{\ldots}  
        - Status       TRUE                             Status of the document  
        - Name         TRUE                                 Name of the sample  
        - Donor ID     TRUE                       ID of related donor document  
        -- DocURL       NaN  Relative ID (accession) of Donor ID doc, provi{\ldots}  
\end{Verbatim}
            
    \subsection{Fill in the biosamples
dataframe}\label{fill-in-the-biosamples-dataframe}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}9}]:} \PY{n}{i} \PY{o}{=} \PY{l+m+mi}{1}
        \PY{k}{for} \PY{n}{mt\PYZus{}unique\PYZus{}id} \PY{o+ow}{in} \PY{n}{samples\PYZus{}df}\PY{o}{.}\PY{n}{index}\PY{p}{:}
            \PY{n}{donor\PYZus{}id} \PY{o}{=} \PY{n}{participants}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{samples\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{mt\PYZus{}unique\PYZus{}id}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Participant.ID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{donor.id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
            \PY{n}{sample\PYZus{}column} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{value}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{mt\PYZus{}unique\PYZus{}id}\PY{p}{)}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{insert}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{,} \PY{n}{biosamples}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Biosample}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{n}{study\PYZus{}id} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{i}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}BS}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{} Status}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Add}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{} Name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MT.Unique.ID\PYZus{}}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{mt\PYZus{}unique\PYZus{}id}\PY{p}{)}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{} Donor ID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{n}{donor\PYZus{}id}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} DocURL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coll/Donors/doc/}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n}{donor\PYZus{}id}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Scientific Name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Homo sapiens}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Common Name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Human}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Taxon ID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{9606}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Disease Type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Healthy Subject}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Anatomical Location}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Plasma cell}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}\PYZhy{} Biofluid Name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{n}{samples\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{mt\PYZus{}unique\PYZus{}id}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Source}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} exRNA Source}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ total cell\PYZhy{}free biofluid RNA}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{} Fractionation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Yes}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{* Related Experiments}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{} Related Experiment}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{n}{study\PYZus{}id} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{1\PYZhy{}EX}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} DocURL}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coll/Experiments/doc/}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n}{study\PYZus{}id} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{1\PYZhy{}EX}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{* Custom Metadata}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{2} \PY{k}{if} \PY{n}{is\PYZus{}time\PYZus{}series} \PY{k}{else} \PY{l+m+mi}{1}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{} Property Name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Participant.ID}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} Value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{n}{samples\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{mt\PYZus{}unique\PYZus{}id}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Participant.ID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
            \PY{k}{if} \PY{n}{is\PYZus{}time\PYZus{}series}\PY{p}{:}
                \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{} Property Name2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{timepoint}\PY{l+s+s1}{\PYZsq{}}
                \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} Value2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{n}{samples\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{mt\PYZus{}unique\PYZus{}id}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{timepoint}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{} Property Name3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{timestep}\PY{l+s+s1}{\PYZsq{}}
                \PY{n}{biosamples}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*\PYZhy{}\PYZhy{} Value3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{sample\PYZus{}column}\PY{p}{]} \PY{o}{=} \PY{n}{samples\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{mt\PYZus{}unique\PYZus{}id}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{timestep}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
            \PY{n}{i} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
            
        \PY{n}{biosamples} \PY{o}{=} \PY{n}{biosamples}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
        \PY{n}{biosamples}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{,} \PY{p}{:}\PY{l+m+mi}{5}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}9}]:}                                                    value1  \textbackslash{}
        \#property                                                   
        Biosample                   EXR-MTEWA1HealthyControls1-BS   
        - Status                                              Add   
        - Name                                     MT.Unique.ID\_1   
        - Donor ID                  EXR-MTEWA1HealthyControls1-DO   
        -- DocURL   coll/Donors/doc/EXR-MTEWA1HealthyControls1-DO   
        
                                                         value107  \textbackslash{}
        \#property                                                   
        Biosample                   EXR-MTEWA1HealthyControls2-BS   
        - Status                                              Add   
        - Name                                   MT.Unique.ID\_107   
        - Donor ID                  EXR-MTEWA1HealthyControls1-DO   
        -- DocURL   coll/Donors/doc/EXR-MTEWA1HealthyControls1-DO   
        
                                                           value2  \textbackslash{}
        \#property                                                   
        Biosample                   EXR-MTEWA1HealthyControls3-BS   
        - Status                                              Add   
        - Name                                     MT.Unique.ID\_2   
        - Donor ID                  EXR-MTEWA1HealthyControls2-DO   
        -- DocURL   coll/Donors/doc/EXR-MTEWA1HealthyControls2-DO   
        
                                                         value108  \textbackslash{}
        \#property                                                   
        Biosample                   EXR-MTEWA1HealthyControls4-BS   
        - Status                                              Add   
        - Name                                   MT.Unique.ID\_108   
        - Donor ID                  EXR-MTEWA1HealthyControls2-DO   
        -- DocURL   coll/Donors/doc/EXR-MTEWA1HealthyControls2-DO   
        
                                                           value3  
        \#property                                                  
        Biosample                   EXR-MTEWA1HealthyControls5-BS  
        - Status                                              Add  
        - Name                                     MT.Unique.ID\_3  
        - Donor ID                  EXR-MTEWA1HealthyControls3-DO  
        -- DocURL   coll/Donors/doc/EXR-MTEWA1HealthyControls3-DO  
\end{Verbatim}
            
    \subsection{Strip numbers from the value columns and property
indices}\label{strip-numbers-from-the-value-columns-and-property-indices}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}10}]:} \PY{k}{for} \PY{n}{df} \PY{o+ow}{in} \PY{p}{[}\PY{n}{donors}\PY{p}{,} \PY{n}{biosamples}\PY{p}{]}\PY{p}{:}
             \PY{n}{df}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{l} \PY{k}{for} \PY{n}{l} \PY{o+ow}{in} \PY{n}{col} \PY{k}{if} \PY{o+ow}{not} \PY{n}{l}\PY{o}{.}\PY{n}{isdigit}\PY{p}{(}\PY{p}{)} \PY{o+ow}{and} \PY{n}{l} \PY{o}{!=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{*}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{k}{for} \PY{n}{col} \PY{o+ow}{in} \PY{n+nb}{list}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{columns}\PY{p}{)}\PY{p}{]}
             \PY{n}{df}\PY{o}{.}\PY{n}{index} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Index}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{l} \PY{k}{for} \PY{n}{l} \PY{o+ow}{in} \PY{n}{col} \PY{k}{if} \PY{o+ow}{not} \PY{n}{l}\PY{o}{.}\PY{n}{isdigit}\PY{p}{(}\PY{p}{)}\PY{p}{)} \PY{k}{for} \PY{n}{col} \PY{o+ow}{in} \PY{n+nb}{list}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{index}\PY{p}{)}\PY{p}{]}\PY{p}{,} \PY{n}{name}\PY{o}{=}\PY{n}{df}\PY{o}{.}\PY{n}{index}\PY{o}{.}\PY{n}{name}\PY{p}{)}
\end{Verbatim}


    \subsection{Load the manifest template
file}\label{load-the-manifest-template-file}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}11}]:} \PY{k+kn}{import} \PY{n+nn}{json}
         \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{templates/manifest\PYZus{}template.manifest.json}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{k}{as} \PY{n}{file}\PY{p}{:}
             \PY{n}{manifest} \PY{o}{=} \PY{n}{json}\PY{o}{.}\PY{n}{load}\PY{p}{(}\PY{n}{file}\PY{p}{)}
         \PY{n}{manifest}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}11}]:} \{'studyName': '',
          'userLogin': '',
          'md5CheckSum': '',
          'runMetadataFileName': '',
          'submissionMetadataFileName': '',
          'studyMetadataFileName': '',
          'experimentMetadataFileName': '',
          'biosampleMetadataFileName': '',
          'donorMetadataFileName': '',
          'manifest': [\{'sampleName': '', 'dataFileName': ''\}],
          'settings': \{'analysisName': ''\}\}
\end{Verbatim}
            
    \subsection{Load the list of fastq
filenames}\label{load-the-list-of-fastq-filenames}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}12}]:} \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{HealthyControl\PYZus{}and\PYZus{}FeedingStudy\PYZus{}fastq\PYZus{}file.names.txt}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{k}{as} \PY{n}{file}\PY{p}{:}
             \PY{n}{sample\PYZus{}filenames} \PY{o}{=} \PY{p}{\PYZob{}}\PY{n+nb}{int}\PY{p}{(}\PY{n}{f}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZus{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{:} \PY{n}{f}\PY{o}{.}\PY{n}{strip}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{f} \PY{o+ow}{in} \PY{n}{file}\PY{p}{\PYZcb{}}  \PY{c+c1}{\PYZsh{} \PYZob{} MT.Unique.ID: fastq\PYZus{}filename \PYZcb{}}
\end{Verbatim}


    \subsection{Fill in the manifest}\label{fill-in-the-manifest}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}13}]:} \PY{k+kn}{import} \PY{n+nn}{datetime}
         \PY{k+kn}{import} \PY{n+nn}{time}
         
         \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{settings}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{analysisName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MTEWA1\PYZus{}Healthy\PYZus{}Controls\PYZus{}}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n}{datetime}\PY{o}{.}\PY{n}{datetime}\PY{o}{.}\PY{n}{fromtimestamp}\PY{p}{(}\PY{n}{time}\PY{o}{.}\PY{n}{time}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{strftime}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{Y\PYZhy{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{m\PYZhy{}}\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
         \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{studyName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{U01 Healthy Controls July 2018}\PY{l+s+s2}{\PYZdq{}}
         \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{userLogin}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sovacool}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{exrna\PYZhy{}mtewa1}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{db}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hg19\PYZus{}exRNA}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{runMetadataFileName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{study\PYZus{}id} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}RU.metadata.tsv}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{submissionMetadataFileName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{study\PYZus{}id} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}SU.metadata.tsv}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{studyMetadataFileName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{study\PYZus{}id} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}ST.metadata.tsv}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{experimentMetadataFileName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{study\PYZus{}id} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}EX.metadata.tsv}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{biosampleMetadataFileName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{study\PYZus{}id} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}BS.metadata.tsv}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{donorMetadataFileName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{study\PYZus{}id} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}DO.metadata.tsv}\PY{l+s+s1}{\PYZsq{}}
         
         \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{manifest}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{p}{)}
         \PY{k}{for} \PY{n}{mt\PYZus{}unique\PYZus{}id} \PY{o+ow}{in} \PY{n+nb}{sorted}\PY{p}{(}\PY{n}{samples\PYZus{}df}\PY{o}{.}\PY{n}{index}\PY{p}{)}\PY{p}{:}  \PY{c+c1}{\PYZsh{} only include fastq filenames in this study}
             \PY{n}{fastq\PYZus{}filename} \PY{o}{=} \PY{n}{sample\PYZus{}filenames}\PY{p}{[}\PY{n}{mt\PYZus{}unique\PYZus{}id}\PY{p}{]}
             \PY{n}{sample\PYZus{}name} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MT.Unique.ID\PYZus{}}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{mt\PYZus{}unique\PYZus{}id}\PY{p}{)}
             \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{manifest}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sampleName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{sample\PYZus{}name}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataFileName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{fastq\PYZus{}filename}\PY{p}{\PYZcb{}}\PY{p}{)}
         \PY{n+nb}{len}\PY{p}{(}\PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{manifest}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}13}]:} 130
\end{Verbatim}
            
    \subsection{Save all the files}\label{save-all-the-files}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}14}]:} \PY{k+kn}{import} \PY{n+nn}{json}
         
         \PY{n}{donors}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{directory} \PY{o}{+} \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{donorMetadataFileName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{sep}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}t}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{index}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
         \PY{n}{biosamples}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{directory} \PY{o}{+} \PY{n}{manifest}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{biosampleMetadataFileName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{sep}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}t}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
         \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{directory} \PY{o}{+} \PY{n}{study\PYZus{}id} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{.manifest.json}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{k}{as} \PY{n}{file}\PY{p}{:}
             \PY{n}{json}\PY{o}{.}\PY{n}{dump}\PY{p}{(}\PY{n}{manifest}\PY{p}{,} \PY{n}{file}\PY{p}{,} \PY{n}{indent}\PY{o}{=}\PY{l+m+mi}{4}\PY{p}{)}
\end{Verbatim}


    \subsection{Validate that the metadata files listed in the manifest
exist}\label{validate-that-the-metadata-files-listed-in-the-manifest-exist}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}15}]:} \PY{k+kn}{import} \PY{n+nn}{os}
         
         \PY{k}{for} \PY{n}{key} \PY{o+ow}{in} \PY{n}{manifest}\PY{p}{:}
             \PY{k}{if} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FileName}\PY{l+s+s1}{\PYZsq{}} \PY{o+ow}{in} \PY{n}{key}\PY{p}{:}
                 \PY{k}{assert} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{isfile}\PY{p}{(}\PY{n}{directory} \PY{o}{+} \PY{n}{manifest}\PY{p}{[}\PY{n}{key}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \subsection{Don't forget to manually fill in experiment, run, study, and
submission metadata
files!}\label{dont-forget-to-manually-fill-in-experiment-run-study-and-submission-metadata-files}


    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
